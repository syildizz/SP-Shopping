@using SP_Shopping.Utilities.ImageHandler
@using SP_Shopping.Utilities.ImageHandlerKeys
@model IEnumerable<ProductDetailsDto>
@inject IImageHandlerDefaulting<ProductImageKey> _productImageHandler

<div class="my-grid">
    @foreach (var product in Model)
    {
        <div class="card" style="">
            <a asp-controller="Products" asp-action="Details" asp-route-id="@product.Id" style="text-decoration: none; color: inherit;">
            <img 
                src="@_productImageHandler.GetImageOrDefaultURL(new(product.Id))"
                class="card-img-top"
                alt="Image for product"
            />
            </a>
            <div class="card-body">
                <a asp-controller="Products" asp-action="Details" asp-route-id="@product.Id" style="text-decoration: none; color: inherit;">
                <div class="card-title card-text-fixer"><strong>@Html.DisplayFor(model => product.Name)</strong></div>    
                <div class="card-text card-text-fixer">@Html.DisplayFor(model => product.Price)</div>    
                <div class="card-text card-text-fixer">@Html.DisplayFor(model => product.CategoryName)</div>    
                </a>
                @if (product.SubmitterId is not null)
                {
                    <a asp-controller="User" asp-action="Index" asp-route-Id="@product.SubmitterId">
                    <div class="card-text card-text-fixer">@Html.DisplayFor(model => product.SubmitterName)</div>
                    </a>
                }
            </div>
        </div>
    }
</div>
